{"version":3,"sources":["webpack:///src/app/pages/comment/comment.page.html","webpack:///src/app/pages/comment/comment-routing.module.ts","webpack:///src/app/pages/comment/comment.module.ts","webpack:///src/app/pages/comment/comment.page.scss","webpack:///src/app/pages/comment/comment.page.ts"],"names":["routes","path","component","CommentPageRoutingModule","imports","forChild","exports","CommentPageModule","declarations","CommentPage","route","translate","storage","core","Toast","navCtrl","platform","InAppBrowser","ngZone","alertCtrl","page","post_id","snapshot","params","parent","status","post_data","getState","view","viewMode","setState","getComments","get","subscribe","trans","formComment","content","required","then","login","needInfo","removeControl","data","value","getConfig","setControl","compose","email","is","loading","isShow","link","option","accept","comment","create","on","res","valid","forEach","url","indexOf","script","code","executeScript","close","run","setTimeout","show","header","message","buttons","text","handler","logout","alert","present","refresher","infiniteScroll","request","comments","concat","target","complete","length","over","loaded","err","updateTime","commenting","method","body","Object","assign","post","reset","date","has_child","id","name","user_id","unshift","showLongCenter","navigateForward","selector","template","encapsulation","None"],"mappings":"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","file":"pages-comment-comment-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button [defaultHref]=\\\"['/detail', post_id]\\\"></ion-back-button>\\n      <ion-button [routerLink]=\\\"['/detail', post_id]\\\" routerDirection=\\\"back\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"home\\\"></ion-icon>\\n      </ion-button>\\n\\t\\t\\t<ion-button *ngIf=\\\"status!='closed'\\\" (click)=\\\"viewMode=!viewMode\\\" [color]=\\\"viewMode?'success':null\\\">\\n\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" name=\\\"eye\\\"></ion-icon>\\n\\t\\t\\t</ion-button>\\n    </ion-buttons>\\n    <!-- <ion-title>\\n      <span *ngIf=\\\"!view?.id\\\">{{'comments.title'|translate}}</span>\\n      <span *ngIf=\\\"view?.id\\\">{{'comments.reply'|translate}}</span>\\n\\t\\t</ion-title> -->\\n\\t\\t<ion-buttons *ngIf=\\\"status!='closed'\\\" slot=\\\"end\\\">\\n\\t\\t\\t<ion-button (click)=\\\"facebook()\\\" class=\\\"facebook\\\">\\n\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" name=\\\"logo-facebook\\\" *ngIf=\\\"!loading\\\"></ion-icon>\\n\\t\\t\\t\\t<ion-spinner name=\\\"lines\\\" *ngIf=\\\"loading\\\"></ion-spinner>\\n\\t\\t\\t</ion-button>\\n\\t\\t\\t<ion-button (click)=\\\"logout()\\\">\\n\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" name=\\\"log-out-outline\\\"></ion-icon>\\n\\t\\t\\t</ion-button>\\n\\t\\t</ion-buttons>\\n\\t</ion-toolbar>\\n\\t<ion-toolbar [color]=\\\"status=='closed' ? 'place' : null\\\">\\n\\t\\t<!-- From comment -->\\n\\t\\t<div light *ngIf=\\\"status=='closed'\\\" class=\\\"ion-padding-vertical ion-text-center\\\">{{'comments.close'|translate}}</div>\\n\\t\\t<ion-list *ngIf=\\\"status!='closed'\\\" class=\\\"ion-padding-horizontal ion-padding-bottom ion-no-margin\\\">\\n\\t\\t\\t<form [formGroup]=\\\"formComment\\\" [hidden]=\\\"viewMode\\\">\\n\\t\\t\\t\\t<ion-item class=\\\"ion-no-padding\\\" *ngIf=\\\"needInfo\\\">\\n\\t\\t\\t\\t\\t<ion-input formControlName=\\\"author_name\\\" [placeholder]=\\\"'comments.name'|translate\\\"></ion-input>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<ion-item class=\\\"ion-no-padding\\\" *ngIf=\\\"needInfo\\\">\\n\\t\\t\\t\\t\\t<ion-input type=\\\"email\\\" formControlName=\\\"author_email\\\" [placeholder]=\\\"'comments.email'|translate\\\"></ion-input>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t<ion-item class=\\\"ion-no-padding\\\">\\n\\t\\t\\t\\t\\t<ion-textarea formControlName=\\\"content\\\" [placeholder]=\\\"'comments.content'|translate\\\"></ion-textarea>\\n\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t</form>\\n\\t\\t\\t<ion-button expand=\\\"block\\\" size=\\\"small\\\" [disabled]=\\\"!formComment.valid && !viewMode\\\" (click)=\\\"comment()\\\" class=\\\"ion-no-margin ion-margin-top\\\">\\n\\t\\t\\t\\t<span>{{'comments.send'|translate}}</span>\\n\\t\\t\\t</ion-button>\\n\\t\\t</ion-list>\\n\\t</ion-toolbar>\\n</ion-header>\\n\\n<ion-content #content>\\n\\t<!-- Refresh -->\\n  <app-refresher slot=\\\"fixed\\\" [disabled]=\\\"!loaded\\\" (ionRefresh)=\\\"doRefresh($event)\\\"></app-refresher>\\n  <!-- Viewing -->\\n  <app-item-comment *ngIf=\\\"view?.id\\\" [comment]=\\\"view\\\" hideView=\\\"true\\\" box-shadow></app-item-comment>\\n  <!-- no data -->\\n  <app-no-data *ngIf=\\\"loaded && (!comments || comments.length < 1)\\\" src=\\\"assets/imgs/no-data-comments.svg\\\" [inner]=\\\"view?.id\\\">\\n    <div place class=\\\"ion-margin-bottom\\\">{{'comments.noData'|translate}}</div>\\n  </app-no-data>\\n  <!-- Loading -->\\n  <app-loading *ngIf=\\\"!loaded || commenting\\\"></app-loading>\\n  <!-- List comment -->\\n\\t<ion-list *ngIf=\\\"comments && comments.length > 0\\\">\\n\\t\\t<app-item-comment *ngFor=\\\"let comment of comments\\\" [comment]=\\\"comment\\\" [status]=\\\"status\\\" (onView)=\\\"viewComment(comment)\\\"></app-item-comment>\\n\\t</ion-list>\\n\\t<!-- Load more -->\\n\\t<app-infinite-scroll threshold=\\\"45%\\\" (ionInfinite)=\\\"load($event)\\\" *ngIf=\\\"!over && comments?.length > 0\\\"></app-infinite-scroll>\\n  <!-- Go to top -->\\n  <app-goto-top slot=\\\"fixed\\\" [content]=\\\"content\\\"></app-goto-top>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CommentPage } from './comment.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CommentPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CommentPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CommentPageRoutingModule } from './comment-routing.module';\n\nimport { CommentPage } from './comment.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from 'src/app/components/components.module';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    ComponentsModule,\n    PipesModule,\n    ReactiveFormsModule,\n    CommentPageRoutingModule\n  ],\n  declarations: [CommentPage]\n})\nexport class CommentPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NvbW1lbnQvY29tbWVudC5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit, ViewEncapsulation, NgZone } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Storage } from '@ionic/storage';\nimport { CoreService } from 'src/app/services/core.service';\nimport { Toast } from '@ionic-native/toast/ngx';\nimport { NavController, Platform, AlertController } from '@ionic/angular';\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\n\n@Component({\n  selector: 'app-comment',\n  templateUrl: './comment.page.html',\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['./comment.page.scss'],\n})\nexport class CommentPage implements OnInit {\n  // post id\n  post_id: Number;\n  // last post detail\n  post_data: any;\n  // comment status data\n  status: string;\n  // is viewing comment\n  view: any;\n  // set true hide comment form\n  viewMode: boolean;\n  // page of posts\n  page = 1;\n  // is over posts, set true then disable infinite scroll\n  over: boolean;\n  // list comments\n  comments: Object[];\n  // set true when loaded comments\n  needInfo: boolean;\n  // is loading comment\n  loaded: boolean;\n  // set true when loading\n  loading: boolean;\n  // set true when comment\n  commenting: boolean;\n  // if is viewing comment, parent is id of comment viewing\n  parent: Number;\n  // FormGroup control form comment\n  formComment: FormGroup;\n  // translate for this page\n  trans: Object;\n  // login data from Storage\n  login: Object;\n\n  constructor(\n    route: ActivatedRoute,\n    translate: TranslateService,\n    private storage: Storage,\n    private core: CoreService,\n    private Toast: Toast,\n    private navCtrl: NavController,\n    private platform: Platform,\n    private InAppBrowser: InAppBrowser,\n    private ngZone: NgZone,\n    private alertCtrl: AlertController,\n  ) {\n    // get params\n    this.post_id = route.snapshot.params['post_id'];\n    this.parent = route.snapshot.params['parent'] || 0;\n    this.status = route.snapshot.params['status'];\n    this.post_data = this.core.getState('last_detail') || {};\n    this.view = this.core.getState('comment_viewing') || {};\n    this.viewMode = !!this.view['id'];\n    if (this.view['id']) this.core.setState('comment_viewing', null);\n    this.getComments();\n    // get translate\n    translate.get('comments').subscribe(trans => this.trans = trans);\n    // setup form comment\n    this.formComment = new FormGroup({ content: new FormControl('', [Validators.required]) });\n  }\n\n  ngOnInit() {\n  }\n\n  ionViewDidEnter() {\n    // get user login\n    this.storage.get('login').then(login => {\n      this.login = login;\n      if (login) {\n        // if user logined\n        this.needInfo = false;\n        this.formComment.removeControl('author_name');\n        this.formComment.removeControl('author_email');\n      } else {\n        // if Guest\n        this.needInfo = true;\n        // backup data form\n        let data = this.formComment.value || {};\n        // setup form comment if website settings require_name_email when comment\n        if (this.core.getConfig('require_name_email')) {\n          this.formComment.setControl('author_name', new FormControl(data['author_name'], Validators.required));\n          this.formComment.setControl('author_email', new FormControl(data['author_email'],\n            Validators.compose([Validators.required, Validators.email])\n          ));\n        } else {\n          this.formComment.setControl('author_name', new FormControl(data['author_name']));\n          this.formComment.setControl('author_email', new FormControl(data['author_email'], Validators.email));\n        }\n      }\n    });\n  }\n\n  facebook() {\n    if (!this.platform.is('cordova') || this.loading || !this.post_data['encode_link']) return;\n    let isShow;\n    let link = 'https://www.facebook.com/plugins/feedback.php?href=' + this.post_data['encode_link'];\n    let option = 'location=no,hardwareback=no,zoom=no,hidden=yes,useWideViewPort=no';\n    let accept: string[] = [\n      link,\n      'facebook.com/dialog/plugin.optin',\n      'facebook.com/login.php'\n    ];\n    let comment = this.InAppBrowser.create(link, '_blank', option);\n    this.loading = true;\n    comment.on('loadstart').subscribe(res => {\n      let valid = false;\n      accept.forEach(url => {\n        if (res['url'].indexOf(url) != -1) valid = true;\n      });\n      if (!valid) {\n        let script = { code: 'location.href = \"' + link + '\";' };\n        comment.executeScript(script);\n      }\n    });\n    comment.on('loaderror').subscribe(res => {\n      if (!isShow) {\n        comment.close();\n        // set comment to null, don't show inappbrowser\n        comment = null;\n        this.ngZone.run(() => this.loading = false);\n      }\n    });\n    comment.on('loadstop').subscribe(res => {\n      let code;\n      code = 'document.body.style.padding=\"50px 0\";';\n      comment.executeScript({ code: code });\n      if (res.url.indexOf('https://www.facebook.com/plugins/feedback.php') == 0) {\n        code = 'var meta = document.createElement(\"meta\");meta.setAttribute(\"name\", \"viewport\");';\n        code += 'meta.setAttribute(\"content\", \"user-scalable=no,initial-scale=1.0001,maximum-scale=1.0001,viewport-fit=cover\");';\n        code += 'document.head.appendChild(meta);';\n        code += 'document.body.style.height=\"100px\";document.body.style.overflowY=\"scroll\";';\n        code += 'window.open=function(url){location.href=url;};';\n        comment.executeScript({ code: code });\n      }\n      // let meta = '<meta name=\"viewport\" content=\"user-scalable=no,initial-scale=1.0001,maximum-scale=1.0001,viewport-fit=cover\">';\n      // let code = 'var div = document.createElement(\"div\");';\n      // code += \"div.innerHTML='\" + meta + \"';\";\n      // code += 'document.getElementsByTagName(\"head\")[0].appendChild(div.firstChild);';\n      // let script = { code: code };\n      // comment.executeScript(script);\n      if (!isShow && comment) {\n        isShow = true;\n        this.ngZone.run(() => this.loading = false);\n        setTimeout(() => { comment.show(); }, 300);\n      }\n    });\n  }\n\n  async logout() {\n    if (!this.platform.is('cordova') || this.loading) return;\n    let alert = await this.alertCtrl.create({\n      header: this.trans['logout']['title'],\n      message: this.trans['logout']['message'],\n      buttons: [\n        {\n          text: this.trans['logout']['yes'],\n          handler: () => {\n            this.loading = true;\n            let option = 'hidden=yes';\n            let logout = this.InAppBrowser.create('https://graph.facebook.com/', '_blank', option);\n            logout.on('loadstop').subscribe(() => {\n              this.ngZone.run(() => this.loading = false);\n              let script = { code: 'document.cookie = \"c_user=;Path=/;domain=.facebook.com;\";' };\n              logout.executeScript(script);\n              logout.close();\n            });\n          }\n        },\n        { text: this.trans['logout']['no'] }\n      ]\n    });\n    alert.present();\n  }\n\n  getComments(refresher = null, infiniteScroll = null) {\n    // get comments of post\n    let params = { parent: this.parent, page: (refresher ? 1 : this.page) };\n    this.core.request('m_comments/' + this.post_id, { params: params }).subscribe(comments => {\n      if (refresher) this.page = 1;\n      if (infiniteScroll) {\n        this.comments = this.comments.concat(comments);\n        infiniteScroll.target.complete();\n      }\n      else if (this.page == 1) this.comments = comments;\n      if (comments.length > 0) this.page++;\n      else this.over = true;\n      this.loaded = true;\n      if (refresher) refresher.target.complete();\n    }, err => {\n      this.loaded = true;\n      if (refresher) refresher.target.complete();\n      if (infiniteScroll) infiniteScroll.target.complete();\n    });\n  }\n\n  doRefresh(refresher) {\n    this.over = false;\n    this.core.updateTime();\n    this.getComments(refresher);\n  }\n\n  load(infiniteScroll) {\n    this.getComments(null, infiniteScroll);\n  }\n\n  comment() {\n    if (this.viewMode) {\n      this.viewMode = false;\n      return;\n    }\n    if (this.commenting) return;\n    // when click comment button\n    this.commenting = true;\n    // prepare request\n    let option = { method: 'POST' };\n    let body = Object.assign(this.formComment.value, {\n      parent: this.parent,\n      post: this.post_id,\n    });\n    option['body'] = body;\n    // request comment\n    this.core.request('comments', option, false, true).subscribe(res => {\n      this.commenting = false;\n      // when success\n      let data = res;\n      this.formComment.reset();\n      // if comment is approved then reload list comments\n      if (data['status'] == 'approved') {\n        let comment = {\n          content: body['content'],\n          date: data['date_gmt'] + '+00:00',\n          has_child: false,\n          id: data['id'],\n          name: data['author_name'],\n          user_id: data['author']\n        };\n        if (data['author_avatar_urls']) comment['avatar'] = data['author_avatar_urls'][96];\n        this.comments.unshift(comment);\n      } else this.Toast.showLongCenter(this.trans['message']['hold']).subscribe(() => { }, () => { });\n    }, err => {\n      // when error\n      this.commenting = false;\n      // prepare message\n      let message: string;\n      if (!this.trans['message']) return;\n      if (this.trans['message'][err['error']['code']]) message = this.trans['message'][err['error']['code']];\n      else message = this.trans['message']['default'];\n      // show Toast\n      this.Toast.showLongCenter(message).subscribe(() => { }, () => { });\n      // if website require for comment and user is Guest\n      if (err['error']['code'] == 'rest_comment_login_required') this.navCtrl.navigateForward('/login');\n    });\n  }\n\n  viewComment(comment: Object) {\n    this.core.setState('comment_viewing', comment);\n    this.navCtrl.navigateForward(['/comment', this.post_id, { status: this.status, parent: comment['id'] }]);\n  }\n}\n"]}