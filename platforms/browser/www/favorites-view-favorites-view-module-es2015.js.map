{"version":3,"sources":["./src/app/pages/favorites-view/favorites-view.page.html","./src/app/pages/favorites-view/favorites-view-routing.module.ts","./src/app/pages/favorites-view/favorites-view.module.ts","./src/app/pages/favorites-view/favorites-view.page.scss","./src/app/pages/favorites-view/favorites-view.page.ts"],"names":[],"mappings":"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","file":"favorites-view-favorites-view-module-es2015.js","sourcesContent":["export default \"<ion-content #content>\\n  <!-- Refresh -->\\n  <app-refresher slot=\\\"fixed\\\" [disabled]=\\\"!loaded\\\" (ionRefresh)=\\\"doRefresh($event)\\\"></app-refresher>\\n  <!-- no data -->\\n  <app-no-data *ngIf=\\\"loaded && (!favorites || favorites.length < 1 || !posts || posts.length < 1)\\\" src=\\\"assets/imgs/no-data-favorites.svg\\\">\\n    <div place class=\\\"ion-margin-bottom\\\">{{'favorites.noData.message'|translate}}</div>\\n    <ion-button color=\\\"danger\\\" size=\\\"small\\\" class=\\\"ion-margin-top\\\" routerLink=\\\"/home/favorites/setting\\\">{{'favorites.noData.button'|translate}}</ion-button>\\n  </app-no-data>\\n  <!-- loading -->\\n  <app-loading *ngIf=\\\"!loaded\\\"></app-loading>\\n  <!-- List posts -->\\n  <app-list-posts *ngIf=\\\"posts\\\" [posts]=\\\"posts\\\"></app-list-posts>\\n  <!-- Load more -->\\n  <app-infinite-scroll threshold=\\\"45%\\\" (ionInfinite)=\\\"load($event)\\\" *ngIf=\\\"!over && posts?.length > 0\\\"></app-infinite-scroll>\\n  <!-- Go to top -->\\n  <app-goto-top slot=\\\"fixed\\\" [content]=\\\"content\\\"></app-goto-top>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FavoritesViewPage } from './favorites-view.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FavoritesViewPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FavoritesViewPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FavoritesViewPageRoutingModule } from './favorites-view-routing.module';\n\nimport { FavoritesViewPage } from './favorites-view.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    TranslateModule,\n    FavoritesViewPageRoutingModule\n  ],\n  declarations: [FavoritesViewPage]\n})\nexport class FavoritesViewPageModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2Zhdm9yaXRlcy12aWV3L2Zhdm9yaXRlcy12aWV3LnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { CoreService } from 'src/app/services/core.service';\n\n@Component({\n  selector: 'app-favorites-view',\n  templateUrl: './favorites-view.page.html',\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['./favorites-view.page.scss'],\n})\nexport class FavoritesViewPage implements OnInit {\n  // list categories id in favorites\n  favorites: Number[];\n  // page of posts\n  page = 1;\n  // array Play posts\n  posts: Object[];\n  // set true when loaded posts\n  loaded: boolean;\n  // true if haven't posts when load more disable infiniteScroll\n  over: boolean;\n\n  constructor(\n    private storage: Storage,\n    private core: CoreService,\n  ) {\n    this.doRefresh();\n  }\n\n  ngOnInit() {\n  }\n\n  ionViewDidEnter() {\n    // refresh if setting changed\n    if (this.favorites) this.storage.get('favorites').then(res => {\n      if (!res) res = [];\n      if (JSON.stringify(this.favorites) != JSON.stringify(res)) {\n        this.loaded = false;\n        this.posts = [];\n        this.page = 1;\n        this.doRefresh();\n      }\n    });\n  }\n\n  doRefresh(refresher?) {\n    // when refresh\n    this.storage.get('favorites').then(res => {\n      this.favorites = res || [];\n      this.over = false;\n      if (refresher) this.core.updateTime();\n      this.getPosts(refresher);\n    });\n  }\n\n  getPosts(refresher?, infiniteScroll?) {\n    // empty favorites\n    if (!this.favorites || this.favorites.length < 1) {\n      this.posts = [];\n      this.over = true;\n      this.loaded = true;\n      if (refresher) refresher.target.complete();\n      if (infiniteScroll) infiniteScroll.target.complete();\n      return;\n    }\n    // get posts with page then concat to list post\n    let params = { categories: this.favorites.join(','), page: (refresher ? 1 : this.page) };\n    this.core.getPosts(params).subscribe(posts => {\n      if (refresher) this.page = 1;\n      if (posts.length > 0) this.page++;\n      else this.over = true;\n      if (infiniteScroll) {\n        this.posts = this.posts.concat(posts);\n        infiniteScroll.target.complete();\n      }\n      else this.posts = posts;\n      this.loaded = true;\n      if (refresher) refresher.target.complete();\n    }, err => {\n      if (infiniteScroll) infiniteScroll.target.complete();\n      if (refresher) refresher.target.complete();\n      this.loaded = true;\n    });\n  }\n\n  load(infiniteScroll) {\n    // when scroll to bottom\n    this.getPosts(null, infiniteScroll);\n  }\n}\n"],"sourceRoot":"webpack:///"}