{"version":3,"sources":["./src/app/pages/categories/categories.page.html","./src/app/pages/categories/categories-routing.module.ts","./src/app/pages/categories/categories.module.ts","./src/app/pages/categories/categories.page.scss","./src/app/pages/categories/categories.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,25DAA41D,E;;;;;;;;;;;;;;;;;;;ACAl0D;AACc;AAEJ;AAEnD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,+DAAc;KAC1B;CACF,CAAC;IAMW,2BAA2B,SAA3B,2BAA2B;CAAG;AAA9B,2BAA2B;IAJvC,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,2BAA2B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;AChBC;AACM;AACF;AAEA;AAE6B;AAEvB;AACG;AACkB;IAa3D,oBAAoB,SAApB,oBAAoB;CAAG;AAAvB,oBAAoB;IAXhC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,mEAAe;YACf,qFAAgB;YAChB,sFAA2B;SAC5B;QACD,YAAY,EAAE,CAAC,+DAAc,CAAC;KAC/B,CAAC;GACW,oBAAoB,CAAG;AAAH;;;;;;;;;;;;;ACvBjC;AAAe,0GAA2C,sBAAsB,GAAG,2DAA2D,wBAAwB,qBAAqB,4BAA4B,qBAAqB,sBAAsB,yBAAyB,iCAAiC,0BAA0B,wDAAwD,GAAG,uCAAuC,iDAAiD,GAAG,iDAAiD,iBAAiB,gDAAgD,GAAG,6CAA6C,u1CAAu1C,E;;;;;;;;;;;;;;;;;;;;;ACAh6D;AAC5B;AACmB;AACX;AACM;IAQ1C,cAAc,SAAd,cAAc;IAgBzB,YACU,IAAiB,EACjB,OAAgB,EAChB,SAA0B,EAClC,SAA2B;QAHnB,SAAI,GAAJ,IAAI,CAAa;QACjB,YAAO,GAAP,OAAO,CAAS;QAChB,cAAS,GAAT,SAAS,CAAiB;QAGlC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;QACnE,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;YAC/C,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;IACR,CAAC;IAED,aAAa,CAAC,SAAS,GAAG,IAAI;QAC5B,IAAI,QAAQ,GAAG,cAAc,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;QAChG,sCAAsC;QACtC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE;YACjD,eAAe;YACf,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC;YAChC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;YAC7B,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC,KAAK,EAAE,CAAC;YACzC,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;gBAClE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;aAC9C;YACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,SAAS;gBAAE,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QAC7C,CAAC,EAAE,GAAG,CAAC,EAAE;YACP,aAAa;YACb,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YACxB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACrB,IAAI,SAAS;gBAAE,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;YAC3C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,SAAS,CAAC,SAAS;QACjB,2CAA2C;QAC3C,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;QACvB,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;IAChC,CAAC;IAED,WAAW,CAAC,UAAoB,EAAE,OAAe;QAC/C,sCAAsC;QACtC,IAAI,YAAY,GAAW,EAAE,CAAC;QAC9B,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YAC5B,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,QAAQ,CAAC;QAC1C,CAAC,CAAC,CAAC;QACH,kDAAkD;QAClD,IAAI,cAAc,GAAa,EAAE,CAAC;QAClC,+BAA+B;QAC/B,KAAK,IAAI,KAAK,IAAI,OAAO,EAAE;YACzB,iDAAiD;YACjD,IAAI,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;gBAAE,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACpF,2BAA2B;YAC3B,OAAO,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;SACrC;QACD,yDAAyD;QACzD,IAAI,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,CAAC;YAAE,KAAK,IAAI,QAAQ,IAAI,YAAY;gBAAE,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC;QACzH,OAAO,cAAc,CAAC;IACxB,CAAC;IAED,WAAW,CAAC,KAAK;QACf,oBAAoB;QACpB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC3D,CAAC;IAED,aAAa;QACX,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;;YACtC,IAAI,CAAC,aAAa,EAAE,CAAC;IAC5B,CAAC;IAED,aAAa;QACX,4BAA4B;QAC5B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;IAC/C,CAAC;IAED,WAAW;QACT,0BAA0B;QAC1B,IAAI,OAAO,GAAW,EAAE,CAAC;QACzB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE;YAC1C,OAAO,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;QACH,kBAAkB;QAClB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YACxD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;QAC/C,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACzB,CAAC;IAEK,YAAY,CAAC,KAAK,EAAE,GAAG;;YAC3B,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,sCAAsC;YACtC,IAAI,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACtC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC;gBACpC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC;gBACvC,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC;wBAChC,OAAO,EAAE,GAAG,EAAE;4BACZ,6BAA6B;4BAC7B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gCAClD,cAAc;gCACd,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gCACpB,oBAAoB;gCACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;gCAC9C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;gCACjD,YAAY;gCACZ,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gCACvB,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,KAAK,EAAE,CAAC;4BAC3B,CAAC,CAAC,CAAC;wBACL,CAAC;qBACF;oBACD,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,EAAE;iBACpC;aACF,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC;KAAA;CACF;;YArJQ,yEAAW;YADX,sDAAO;YAEP,8DAAe;YACf,oEAAgB;;AAQZ,cAAc;IAN1B,+DAAS,CAAC;QACT,QAAQ,EAAE,gBAAgB;QAC1B,sOAAqC;QACrC,aAAa,EAAE,+DAAiB,CAAC,IAAI;;KAEtC,CAAC;mFAkBgB,yEAAW;QACR,sDAAO;QACL,8DAAe;QACvB,oEAAgB;GApBlB,cAAc,CA2I1B;AA3I0B","file":"pages-categories-categories-module-es2015.js","sourcesContent":["export default \"<ion-content #content>\\n  <!-- Refresh -->\\n  <app-refresher slot=\\\"fixed\\\" [disabled]=\\\"!loaded || isReorder\\\" (ionRefresh)=\\\"doRefresh($event)\\\"></app-refresher>\\n  <!-- no data -->\\n  <app-no-data *ngIf=\\\"loaded && categories.length <1\\\"></app-no-data>\\n  <!-- Loading -->\\n  <app-loading *ngIf=\\\"!loaded\\\"></app-loading>\\n  <!-- List categories -->\\n  <ion-reorder-group class=\\\"list-categories\\\" [disabled]=\\\"!isReorder\\\" (ionItemReorder)=\\\"itemReorder($event)\\\">\\n    <ion-card *ngFor=\\\"let category of categories\\\" [routerLink]=\\\"!isReorder ? ['/detail-category', category.id] : null\\\">\\n      <img [src]=\\\"category.image||'assets/imgs/no-image.png'\\\" width-100 class=\\\"ion-float-start\\\">\\n      <ion-card-content absolute top start size-full blur-inner padding-x2>\\n        <ion-reorder slot=\\\"start\\\" absolute bottom start index-100>\\n          <ion-icon name=\\\"repeat\\\" size=\\\"large\\\" padding-x2 rotate-90></ion-icon>\\n        </ion-reorder>\\n        <b [innerHTML]=\\\"category.name\\\" class=\\\"category-name trueblack\\\"></b>\\n      </ion-card-content>\\n    </ion-card>\\n  </ion-reorder-group>\\n  <ion-fab #fab *ngIf=\\\"categories && categories.length > 1\\\" vertical=\\\"top\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" class=\\\"fab-sort-categories\\\">\\n    <ion-fab-button color=\\\"light\\\" size=\\\"small\\\" (click)=\\\"changeReorder()\\\">\\n      <ion-icon name=\\\"repeat\\\" rotate-90></ion-icon>\\n    </ion-fab-button>\\n    <ion-fab-list side=\\\"bottom\\\">\\n      <ion-fab-button color=\\\"primary\\\" (click)=\\\"saveReorder()\\\">\\n        <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n      </ion-fab-button>\\n      <ion-fab-button color=\\\"danger\\\" (click)=\\\"clearReorder($event, fab)\\\">\\n        <ion-icon name=\\\"trash\\\"></ion-icon>\\n      </ion-fab-button>\\n    </ion-fab-list>\\n  </ion-fab>\\n    <!-- Go to top -->\\n    <app-goto-top slot=\\\"fixed\\\" [content]=\\\"content\\\"></app-goto-top>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CategoriesPage } from './categories.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CategoriesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CategoriesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CategoriesPageRoutingModule } from './categories-routing.module';\n\nimport { CategoriesPage } from './categories.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    ComponentsModule,\n    CategoriesPageRoutingModule\n  ],\n  declarations: [CategoriesPage]\n})\nexport class CategoriesPageModule {}\n","export default \"app-categories .list-categories ion-card {\\n  min-height: 110px;\\n}\\napp-categories .list-categories ion-card .category-name {\\n  padding-right: 10px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  max-height: 40px;\\n  line-height: 20px;\\n  display: -webkit-box;\\n  -webkit-box-orient: vertical;\\n  -webkit-line-clamp: 2;\\n  text-shadow: 1px 1px 5px var(--ion-color-truewhite);\\n}\\napp-categories .fab-sort-categories {\\n  right: calc(var(--ion-safe-area-right, 0px));\\n}\\n[dir=rtl] app-categories .fab-sort-categories {\\n  right: unset;\\n  left: calc(var(--ion-safe-area-right, 0px));\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2F0ZWdvcmllcy9jYXRlZ29yaWVzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFSTtFQUNFLGlCQUFBO0FBRE47QUFFTTtFQUNFLG1CQUFBO0VBQ0EsZ0JBQUE7RUFDQSx1QkFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxvQkFBQTtFQUNBLDRCQUFBO0VBQ0EscUJBQUE7RUFDQSxtREFBQTtBQUFSO0FBSUU7RUFDRSw0Q0FBQTtBQUZKO0FBT0U7RUFDRSxZQUFBO0VBQ0EsMkNBQUE7QUFKSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NhdGVnb3JpZXMvY2F0ZWdvcmllcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJhcHAtY2F0ZWdvcmllcyB7XG4gIC5saXN0LWNhdGVnb3JpZXMge1xuICAgIGlvbi1jYXJkIHtcbiAgICAgIG1pbi1oZWlnaHQ6IDExMHB4O1xuICAgICAgLmNhdGVnb3J5LW5hbWUge1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgbWF4LWhlaWdodDogNDBweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICAgICAgICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsO1xuICAgICAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDI7XG4gICAgICAgIHRleHQtc2hhZG93OiAxcHggMXB4IDVweCB2YXIoLS1pb24tY29sb3ItdHJ1ZXdoaXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLmZhYi1zb3J0LWNhdGVnb3JpZXMge1xuICAgIHJpZ2h0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQsIDBweCkpO1xuICB9XG59XG5cbltkaXI9XCJydGxcIl0gYXBwLWNhdGVnb3JpZXMge1xuICAuZmFiLXNvcnQtY2F0ZWdvcmllcyB7XG4gICAgcmlnaHQ6IHVuc2V0O1xuICAgIGxlZnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCwgMHB4KSk7XG4gIH1cbn1cbiJdfQ== */\";","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { CoreService } from 'src/app/services/core.service';\nimport { AlertController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'app-categories',\n  templateUrl: './categories.page.html',\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['./categories.page.scss'],\n})\nexport class CategoriesPage implements OnInit {\n  // list categories\n  categories: Object[];\n  // for cancel reorder\n  rawCategories: Object[];\n  // for clear reorder\n  dataCategories: Object[];\n  // reorder categories from Storage\n  reorder: Object;\n  // set true when loaded categories\n  loaded: boolean;\n  // set true when reorder list categories\n  isReorder: boolean;\n  // translate for this page\n  trans: Object;\n\n  constructor(\n    private core: CoreService,\n    private storage: Storage,\n    private alertCtrl: AlertController,\n    translate: TranslateService,\n  ) {\n    translate.get('categories').subscribe(trans => this.trans = trans);\n    storage.get('reorder_categories').then(reorder => {\n      this.reorder = reorder;\n      this.getCategories();\n    });\n  }\n\n  ngOnInit() {\n  }\n\n  getCategories(refresher = null) {\n    let endpoint = 'm_categories' + (this.core.getConfig('show_all_categories') ? '' : '?parent=0');\n    // request get categories from website\n    this.core.request(endpoint).subscribe(categories => {\n      // when success\n      this.rawCategories = categories;\n      this.categories = categories;\n      this.dataCategories = categories.slice();\n      if (this.reorder) {\n        this.categories = this.sortReorder(this.categories, this.reorder);\n        this.rawCategories = this.categories.slice();\n      }\n      this.loaded = true;\n      if (refresher) refresher.target.complete();\n    }, err => {\n      // when error\n      this.rawCategories = [];\n      this.categories = [];\n      if (refresher) refresher.target.complete();\n      this.loaded = true;\n    });\n  }\n\n  doRefresh(refresher) {\n    // when refresh update last_time over cache\n    this.core.updateTime();\n    this.getCategories(refresher);\n  }\n\n  sortReorder(categories: Object[], reorder: Object): Object[] {\n    // clone categories as Object for sort\n    let reCategories: Object = {};\n    categories.forEach(category => {\n      reCategories[category['id']] = category;\n    });\n    // array sorted categories by reorder from Storage\n    let sortCategories: Object[] = [];\n    // for reorder sort cateogories\n    for (var index in reorder) {\n      // if has category now add to list sortCategories\n      if (reCategories[reorder[index]]) sortCategories.push(reCategories[reorder[index]]);\n      // delete from reCategories\n      delete reCategories[reorder[index]];\n    }\n    // if reCategories has child add to end of sortCategories\n    if (Object.keys(reCategories).length > 0) for (var category in reCategories) sortCategories.push(reCategories[category]);\n    return sortCategories;\n  }\n\n  itemReorder(event) {\n    // when reorder item\n    this.categories = event.detail.complete(this.categories);\n  }\n\n  changeReorder() {\n    if (!this.isReorder) this.isReorder = true;\n    else this.cancelReorder();\n  }\n\n  cancelReorder() {\n    // when click cancel reorder\n    this.isReorder = false;\n    this.categories = this.rawCategories.slice();\n  }\n\n  saveReorder() {\n    // when click save reorder\n    let reorder: Object = {};\n    this.categories.forEach((category, index) => {\n      reorder[index] = category['id'];\n    });\n    // save to storage\n    this.storage.set('reorder_categories', reorder).then(() => {\n      this.reorder = reorder;\n      this.rawCategories = this.categories.slice();\n    });\n    this.isReorder = false;\n  }\n\n  async clearReorder(event, fab) {\n    event.stopPropagation();\n    // when click clear reorder show alert\n    let alert = await this.alertCtrl.create({\n      header: this.trans['clear']['title'],\n      message: this.trans['clear']['message'],\n      buttons: [\n        {\n          text: this.trans['clear']['yes'],\n          handler: () => {\n            // if yes remove from Storage\n            this.storage.remove('reorder_categories').then(() => {\n              // update view\n              this.reorder = null;\n              // reload categories\n              this.categories = this.dataCategories.slice();\n              this.rawCategories = this.dataCategories.slice();\n              // close fab\n              this.isReorder = false;\n              fab.close && fab.close();\n            });\n          }\n        },\n        { text: this.trans['clear']['no'] }\n      ]\n    });\n    alert.present();\n  }\n}\n"],"sourceRoot":"webpack:///"}