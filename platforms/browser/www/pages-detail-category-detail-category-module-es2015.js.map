{"version":3,"sources":["./src/app/pages/detail-category/detail-category.page.html","./src/app/pages/detail-category/detail-category-routing.module.ts","./src/app/pages/detail-category/detail-category.module.ts","./src/app/pages/detail-category/detail-category.page.scss","./src/app/pages/detail-category/detail-category.page.ts"],"names":[],"mappings":"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","file":"pages-detail-category-detail-category-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar [color]=\\\"category?.color\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/home/categories\\\"></ion-back-button>\\n      <ion-button routerLink=\\\"/home/categories\\\" routerDirection=\\\"root\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"home\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>\\n\\t\\t\\t<span [innerHTML]=\\\"category?.name\\\"></span>\\n\\t\\t</ion-title>\\n\\t\\t<ion-buttons slot=\\\"end\\\">\\n\\t\\t\\t<ion-button *ngIf=\\\"category?.id\\\" [routerLink]=\\\"['/search', {id:category.id}]\\\">\\n\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" name=\\\"search\\\"></ion-icon>\\n\\t\\t\\t</ion-button>\\n\\t\\t\\t<ion-button (click)=\\\"changeSubscribe()\\\">\\n\\t\\t\\t\\t<ion-icon *ngIf=\\\"!subscribe[id]\\\" slot=\\\"icon-only\\\" name=\\\"notifications\\\"></ion-icon>\\n\\t\\t\\t\\t<ion-icon *ngIf=\\\"subscribe[id]\\\" slot=\\\"icon-only\\\" name=\\\"notifications-off\\\"></ion-icon>\\n\\t\\t\\t</ion-button>\\n\\t\\t</ion-buttons>\\n  </ion-toolbar>\\n  <!-- List childs -->\\n\\t<ion-toolbar *ngIf=\\\"childs && childs.length > 0\\\" class=\\\"list-childs ion-no-padding ion-border\\\">\\n\\t\\t<ion-row height-100 overflow nowrap>\\n      <ion-button *ngFor=\\\"let child of childs\\\" fill=\\\"clear\\\" class=\\\"ion-no-margin\\\" [routerLink]=\\\"['/detail-category', child.id]\\\">\\n\\t\\t\\t\\t<ion-badge [color]=\\\"child.color || 'place'\\\" class=\\\"ion-padding-vertical\\\">\\n          <span [innerHTML]=\\\"child.name\\\"></span>\\n\\t\\t\\t\\t</ion-badge>\\n\\t\\t\\t</ion-button>\\n\\t\\t</ion-row>\\n\\t</ion-toolbar>\\n</ion-header>\\n\\n<ion-content #content>\\n\\t<!-- Refresh -->\\n\\t<app-refresher slot=\\\"fixed\\\" [disabled]=\\\"!loaded\\\" (ionRefresh)=\\\"doRefresh($event)\\\"></app-refresher>\\n\\t<!-- no data -->\\n  <app-no-data *ngIf=\\\"loaded && (!posts || posts.length < 1)\\\"></app-no-data>\\n\\t<!-- Loading -->\\n\\t<app-loading *ngIf=\\\"!loaded\\\"></app-loading>\\n\\t<!-- List posts -->\\n\\t<app-list-posts *ngIf=\\\"posts\\\" [posts]=\\\"posts\\\"></app-list-posts>\\n\\t<!-- Load more -->\\n\\t<app-infinite-scroll threshold=\\\"45%\\\" (ionInfinite)=\\\"load($event)\\\" *ngIf=\\\"!over && posts?.length > 0\\\"></app-infinite-scroll>\\n  <!-- Go to top -->\\n  <app-goto-top slot=\\\"fixed\\\" [content]=\\\"content\\\"></app-goto-top>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DetailCategoryPage } from './detail-category.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetailCategoryPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DetailCategoryPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetailCategoryPageRoutingModule } from './detail-category-routing.module';\n\nimport { DetailCategoryPage } from './detail-category.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    ComponentsModule,\n    DetailCategoryPageRoutingModule\n  ],\n  declarations: [DetailCategoryPage]\n})\nexport class DetailCategoryPageModule {}\n","export default \"app-detail-category .list-childs .button {\\n  --padding-start: 8px;\\n  --padding-end: 8px;\\n}\\napp-detail-category .list-childs .button ion-badge {\\n  border-radius: 50px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZGV0YWlsLWNhdGVnb3J5L2RldGFpbC1jYXRlZ29yeS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUk7RUFDRSxvQkFBQTtFQUNBLGtCQUFBO0FBRE47QUFFTTtFQUNFLG1CQUFBO0FBQVIiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9kZXRhaWwtY2F0ZWdvcnkvZGV0YWlsLWNhdGVnb3J5LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImFwcC1kZXRhaWwtY2F0ZWdvcnkge1xuICAubGlzdC1jaGlsZHMge1xuICAgIC5idXR0b24ge1xuICAgICAgLS1wYWRkaW5nLXN0YXJ0OiA4cHg7XG4gICAgICAtLXBhZGRpbmctZW5kOiA4cHg7XG4gICAgICBpb24tYmFkZ2Uge1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MHB4O1xuICAgICAgfVxuICAgIH1cbiAgfVxufSJdfQ== */\";","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { CoreService } from 'src/app/services/core.service';\nimport { Storage } from '@ionic/storage';\nimport { OneSignal } from '@ionic-native/onesignal/ngx';\n\n@Component({\n  selector: 'app-detail-category',\n  templateUrl: './detail-category.page.html',\n  encapsulation: ViewEncapsulation.None,\n  providers: [OneSignal],\n  styleUrls: ['./detail-category.page.scss'],\n})\nexport class DetailCategoryPage implements OnInit {\n  // id of category\n  id: any;\n  // category viewing data\n  category: any;\n  // list childs categories\n  childs: Object[];\n  // is showing child categories\n  showChild: boolean = false;\n  // set true when loaded posts\n  loaded: boolean;\n  // list posts in category\n  posts: Object[];\n  // is user following this category\n  subscribe: Object = {};\n  // page of posts\n  page = 1;\n  // is over posts, set true then disable infinite scroll\n  over: boolean;\n  // set true show description\n  isShow: boolean = false;\n\n  constructor(\n    route: ActivatedRoute,\n    private core: CoreService,\n    private storage: Storage,\n    private OneSignal: OneSignal,\n  ) {\n    this.id = route.snapshot.params['id'];\n    // request get child categories\n    core.request('m_categories?include=' + this.id).subscribe(res => {\n      this.category = res[0];\n      if (this.category) {\n        core.request('m_categories?parent=' + this.id).subscribe(res => {\n          this.childs = res;\n        }, err => { });\n        this.getPosts();\n        // get subscribe status\n        storage.get('subscribe').then(subscribe => {\n          if (subscribe) this.subscribe = subscribe;\n        });\n      }\n    }, err => {\n      this.loaded = true;\n    });\n  }\n\n  ngOnInit() {\n  }\n\n  getPosts(refresher = null, infiniteScroll = null) {\n    // get posts in category from website\n    let params = { categories: this.id, page: (refresher ? 1 : this.page) };\n    this.core.getPosts(params).subscribe(posts => {\n      if (refresher) this.page = 1;\n      if (posts.length > 0) this.page++;\n      else this.over = true;\n      if (infiniteScroll) {\n        this.posts = this.posts.concat(posts);\n        infiniteScroll.target.complete();\n      }\n      else this.posts = posts;\n      this.loaded = true;\n      if (refresher) refresher.target.complete();\n    }, err => {\n      if (infiniteScroll) infiniteScroll.target.complete();\n      if (refresher) refresher.target.complete();\n      this.loaded = true;\n    });\n  }\n\n  doRefresh(refresher) {\n    this.over = false;\n    this.core.updateTime();\n    this.getPosts(refresher);\n  }\n\n  load(infiniteScroll) {\n    this.getPosts(null, infiniteScroll);\n  }\n\n  changeSubscribe() {\n    // change subscribe status\n    if (this.subscribe[this.id]) {\n      this.OneSignal.deleteTag(this.id);\n      delete this.subscribe[this.id];\n      this.updateSubscribe();\n    } else {\n      this.OneSignal.sendTag(this.id, this.category['name']);\n      this.subscribe[this.id] = this.category['name'];\n      this.updateSubscribe();\n    }\n  }\n\n  updateSubscribe() {\n    // update subscribe status in Storage\n    this.storage.set('subscribe', this.subscribe);\n  }\n}\n"],"sourceRoot":"webpack:///"}